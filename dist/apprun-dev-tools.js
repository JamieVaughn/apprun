!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.apprun=n():t.apprun=n()}(this,(function(){return function(t){var n={};function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:o})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(o,r,function(n){return t[n]}.bind(null,r));return o},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=15)}({1:function(t,n,e){"use strict";(function(t){var e=this&&this.__assign||function(){return(e=Object.assign||function(t){for(var n,e=1,o=arguments.length;e<o;e++)for(var r in n=arguments[e])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.App=void 0;var o=function(){function t(){this._events={}}return t.prototype.on=function(t,n,e){void 0===e&&(e={}),this._events[t]=this._events[t]||[],this._events[t].push({fn:n,options:e})},t.prototype.off=function(t,n){var e=this._events[t]||[];this._events[t]=e.filter((function(t){return t.fn!==n}))},t.prototype.find=function(t){return this._events[t]},t.prototype.run=function(t){for(var n=this,e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var r=this._events[t]||[];return console.assert(r&&r.length>0,"No subscriber for event: "+t),this._events[t]=r.filter((function(t){return!t.options.once})),r.forEach((function(o){var r=o.fn,u=o.options;return u.delay?n.delay(t,r,e,u):r.apply(n,e),!o.options.once})),r.length},t.prototype.once=function(t,n,o){void 0===o&&(o={}),this.on(t,n,e(e({},o),{once:!0}))},t.prototype.delay=function(t,n,e,o){var r=this;o._t&&clearTimeout(o._t),o._t=setTimeout((function(){clearTimeout(o._t),n.apply(r,e)}),o.delay)},t}();n.App=o;var r,u="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t;u.app&&u._AppRunVersions?r=u.app:(r=new o,u.app=r,u._AppRunVersions="AppRun-1"),n.default=r}).call(this,e(4))},15:function(t,n,e){"use strict";var o=this&&this.__read||function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var o,r,u=e.call(t),i=[];try{for(;(void 0===n||n-- >0)&&!(o=u.next()).done;)i.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(e=u.return)&&e.call(u)}finally{if(r)throw r.error}}return i},r=this&&this.__spread||function(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(o(arguments[n]));return t},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var i=u(e(1)),c=u(e(16)),l=e(17);function a(t){var n=window.open("","_apprun_debug","toolbar=0");n.document.write("<html>\n  <title>AppRun Analyzer | "+document.location.href+'</title>\n  <style>\n    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI" }\n    li { margin-left: 80px; }\n  </style>\n  <body>\n  <div id="main">'+t+"</div>\n  <\/script>\n  </body>\n  </html>"),n.document.close()}i.default.debug=!0,window["_apprun-help"]=["",function(){Object.keys(window).forEach((function(t){t.startsWith("_apprun-")&&("_apprun-help"===t?console.log("AppRun Commands:"):console.log("* "+t.substring(8)+": "+window[t][0]))}))}];var s=function(){var t={components:{}};return i.default.run("get-components",t),t.components},f=function(t){var n=i.default._events,e={},o=s();Object.keys(o).forEach((function(t){o[t].forEach((function(t){t._actions.forEach((function(n){e[n.name]=e[n.name]||[],e[n.name].push(t)}))}))}));var r,u,l,f=[];if(Object.keys(e).forEach((function(t){f.push({event:t,components:e[t],global:!!n[t]})})),f.sort((function(t,n){return t.event>n.event?1:-1})).map((function(t){return t.event})),t){var p=(r=f,u=function(t){var n=t.components;return i.default.h("ul",null,n.map((function(t){return i.default.h("li",null,i.default.h("div",null,t.constructor.name))})))},l=function(t){var n=t.events,e=t.global;return i.default.h("ul",null,n&&n.filter((function(t){return t.global===e})).map((function(t){var n=t.event,e=t.components;return i.default.h("li",null,i.default.h("div",null,n),i.default.h(u,{components:e}))})))},i.default.h("div",null,i.default.h("div",null,"GLOBAL EVENTS"),i.default.h(l,{events:r,global:!0}),i.default.h("div",null,"LOCAL EVENTS"),i.default.h(l,{events:r,global:!1})));a(c.default(p))}else console.log("=== GLOBAL EVENTS ==="),f.filter((function(t){return t.global})).forEach((function(t){var n=t.event,e=t.components;return console.log({event:n},e)})),console.log("=== LOCAL EVENTS ==="),f.filter((function(t){return!t.global})).forEach((function(t){var n=t.event,e=t.components;return console.log({event:n},e)}))},p=function(t){var n,e,o,r=s(),u=[];if(Object.keys(r).forEach((function(t){var n="string"==typeof t?document.getElementById(t):t,e=r[t].map((function(t){return{component:t,events:t._actions}}));u.push({element:n,comps:e})})),t){var l=(n=r,e=function(t){var n=t.events;return i.default.h("ul",null,n&&n.map((function(t){return i.default.h("li",null,t.name)})))},o=function(t){var n=t.components;return i.default.h("ul",null,n.map((function(t){return i.default.h("li",null,i.default.h("div",null,t.constructor.name),i.default.h(e,{events:t._actions}))})))},i.default.h("ul",null,Object.keys(n).map((function(t){return i.default.h("li",null,i.default.h("div",null,"#",t),i.default.h(o,{components:n[t]}))}))));a(c.default(l))}else u.forEach((function(t){var n=t.element,e=t.comps;return console.log(n,e)}))},d=0;if(i.default.on("debug",(function(t){1&d&&t.event&&console.log(t),2&d&&t.vdom&&console.log(t)})),window["_apprun-components"]=["components [print]",function(t){p("print"===t)}],window["_apprun-events"]=["events [print]",function(t){f("print"===t)}],window["_apprun-log"]=["log [event|view] on|off",function(t,n){"on"===t?d=3:"off"===t?d=0:"event"===t?"on"===n?d|=1:"off"===n&&(d&=-2):"view"===t&&("on"===n?d|=2:"off"===n&&(d&=-3)),console.log("* log "+t+" "+(n||""))}],window["_apprun-create-event-tests"]=["create-event-tests",function(){return l._createEventTests()}],window["_apprun-create-state-tests"]=["create-state-tests <start|stop>",function(t){return l._createStateTests(t)}],window._apprun=function(t){var n=o(t[0].split(" ").filter((function(t){return!!t}))),e=n[0],u=n.slice(1),i=window["_apprun-"+e];i?i[1].apply(i,r(u)):window["_apprun-help"][1]()},console.info('AppRun DevTools 0.4: type "_apprun `help`" to list all available commands.'),window.__REDUX_DEVTOOLS_EXTENSION__){var v=!1,h=window.__REDUX_DEVTOOLS_EXTENSION__.connect();h&&(console.info("Connected to the Redux DevTools"),h.subscribe((function(t){"START"===t.type?v=!0:"STOP"===t.type?v=!1:t.type})),i.default.on("debug",(function(t){if(v&&t.event){var n=t.newState,e={type:t.event,payload:t.e};n instanceof Promise?n.then((function(t){return h.send(e,t)})):h.send(e,n)}})))}},16:function(t,n,e){"use strict";function o(t){return Object.keys(t).map((function(n){return" "+("className"===n?"class":n)+'="'+(("object"==typeof(e=t[n])?Object.keys(e).map((function(t){return t+":"+e[t]})).join(";"):e.toString())+'"');var e})).join("")}function r(t){return t.map((function(t){return u(t)})).join("")}function u(t){if(!t)return"";if(function t(n){for(var e in n)null==n[e]?delete n[e]:"object"==typeof n[e]&&t(n[e])}(t),Array.isArray(t))return r(t);if("string"==typeof t)return t.startsWith("_html:")?t.substring(6):t;if(t.tag){var n=t.props?o(t.props):"",e=t.children?r(t.children):"";return"<"+t.tag+n+">"+e+"</"+t.tag+">"}return"object"==typeof t?JSON.stringify(t):void 0}Object.defineProperty(n,"__esModule",{value:!0}),n.default=u},17:function(t,n,e){"use strict";var o;function r(t){(o=window.open("",t)).document.write("<html>\n  <title>AppRun Analyzer | "+document.location.href+'</title>\n  <style>\n    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI" }\n  </style>\n  <body><pre>')}function u(t){o.document.write(t+"\n")}function i(){o.document.write("</pre>\n  </body>\n  </html>"),o.document.close()}Object.defineProperty(n,"__esModule",{value:!0}),n._createStateTests=n._createEventTests=void 0,app.debug=!0,n._createEventTests=function(){var t={components:{}};app.run("get-components",t);var n=t.components;r(""),Object.keys(n).forEach((function(t){n[t].forEach((function(t){u("const component = "+t.constructor.name+";"),u("describe('"+t.constructor.name+"', ()=>{"),t._actions.forEach((function(t){u("  it ('should handle event: "+t.name+"', ()=>{"),u("    component.run('"+t.name+"');"),u("    expect(component.state).toBeTruthy();"),u("  })")})),u("});")}))})),i()};var c=!1,l=[];app.on("debug",(function(t){c&&t.vdom&&(l.push(t),console.log("* "+l.length+" state(s) recorded."))})),n._createStateTests=function(t){"start"===t?(l=[],c=!0,console.log("* State logging started.")):"stop"===t?(0!==l.length?(r(""),l.forEach((function(t,n){u("  it ('view snapshot: #"+(n+1)+"', ()=>{"),u("    const component = "+t.component.constructor.name+";"),u("    const state = "+JSON.stringify(t.state,void 0,2)+";"),u("    const vdom = component['view'](state);"),u("    expect(JSON.stringify(vdom)).toMatchSnapshot();"),u("  })")})),i()):console.log("* No state recorded."),c=!1,l=[],console.log("* State logging stopped.")):console.log("create-state-tests <start|stop>")}},4:function(t,n){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e}})}));
//# sourceMappingURL=apprun-dev-tools.js.map