!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.apprun=t():e.apprun=t()}(this,(function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=15)}({1:function(e,t,n){"use strict";(function(e){var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;var o=function(){function e(){this._events={}}return e.prototype.on=function(e,t,n){void 0===n&&(n={}),this._events[e]=this._events[e]||[],this._events[e].push({fn:t,options:n})},e.prototype.off=function(e,t){var n=this._events[e]||[];this._events[e]=n.filter((function(e){return e.fn!==t}))},e.prototype.find=function(e){return this._events[e]},e.prototype.run=function(e){for(var t=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var r=this._events[e]||[];return console.assert(r&&r.length>0,"No subscriber for event: "+e),this._events[e]=r.filter((function(e){return!e.options.once})),r.forEach((function(o){var r=o.fn,u=o.options;return u.delay?t.delay(e,r,n,u):r.apply(t,n),!o.options.once})),r.length},e.prototype.once=function(e,t,o){void 0===o&&(o={}),this.on(e,t,n(n({},o),{once:!0}))},e.prototype.delay=function(e,t,n,o){var r=this;o._t&&clearTimeout(o._t),o._t=setTimeout((function(){clearTimeout(o._t),t.apply(r,n)}),o.delay)},e}();t.App=o;var r,u="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e;u.app&&u._AppRunVersions?r=u.app:(r=new o,u.app=r,u._AppRunVersions="AppRun-1"),t.default=r}).call(this,n(4))},15:function(e,t,n){"use strict";var o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,u=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(o=u.next()).done;)c.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return c},r=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=u(n(1)),l=u(n(16)),i=n(17);function a(e){var t=window.open("","_apprun_debug","toolbar=0");t.document.write("<html>\n  <title>AppRun Analyzer | "+document.location.href+'</title>\n  <style>\n    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI" }\n    li { margin-left: 80px; }\n  </style>\n  <body>\n  <div id="main">'+e+"</div>\n  <\/script>\n  </body>\n  </html>"),t.document.close()}c.default.debug=!0,window["_apprun-help"]=["",function(){Object.keys(window).forEach((function(e){e.startsWith("_apprun-")&&("_apprun-help"===e?console.log("AppRun Commands:"):console.log("* "+e.substring(8)+": "+window[e][0]))}))}];var s=function(){var e={components:{}};return c.default.run("get-components",e),e.components},f=function(e){var t=c.default._events,n={},o=s();Object.keys(o).forEach((function(e){o[e].forEach((function(e){e._actions.forEach((function(t){n[t.name]=n[t.name]||[],n[t.name].push(e)}))}))}));var r,u,i,f=[];if(Object.keys(n).forEach((function(e){f.push({event:e,components:n[e],global:!!t[e]})})),f.sort((function(e,t){return e.event>t.event?1:-1})).map((function(e){return e.event})),e){var p=(r=f,u=function(e){var t=e.components;return c.default.createElement("ul",null,t.map((function(e){return c.default.createElement("li",null,c.default.createElement("div",null,e.constructor.name))})))},i=function(e){var t=e.events,n=e.global;return c.default.createElement("ul",null,t&&t.filter((function(e){return e.global===n})).map((function(e){var t=e.event,n=e.components;return c.default.createElement("li",null,c.default.createElement("div",null,t),c.default.createElement(u,{components:n}))})))},c.default.createElement("div",null,c.default.createElement("div",null,"GLOBAL EVENTS"),c.default.createElement(i,{events:r,global:!0}),c.default.createElement("div",null,"LOCAL EVENTS"),c.default.createElement(i,{events:r,global:!1})));a(l.default(p))}else console.log("=== GLOBAL EVENTS ==="),f.filter((function(e){return e.global})).forEach((function(e){var t=e.event,n=e.components;return console.log({event:t},n)})),console.log("=== LOCAL EVENTS ==="),f.filter((function(e){return!e.global})).forEach((function(e){var t=e.event,n=e.components;return console.log({event:t},n)}))},p=function(e){var t,n,o,r=s(),u=[];if(Object.keys(r).forEach((function(e){var t="string"==typeof e?document.getElementById(e):e,n=r[e].map((function(e){return{component:e,events:e._actions}}));u.push({element:t,comps:n})})),e){var i=(t=r,n=function(e){var t=e.events;return c.default.createElement("ul",null,t&&t.map((function(e){return c.default.createElement("li",null,e.name)})))},o=function(e){var t=e.components;return c.default.createElement("ul",null,t.map((function(e){return c.default.createElement("li",null,c.default.createElement("div",null,e.constructor.name),c.default.createElement(n,{events:e._actions}))})))},c.default.createElement("ul",null,Object.keys(t).map((function(e){return c.default.createElement("li",null,c.default.createElement("div",null,"#",e),c.default.createElement(o,{components:t[e]}))}))));a(l.default(i))}else u.forEach((function(e){var t=e.element,n=e.comps;return console.log(t,n)}))},d=0;if(c.default.on("debug",(function(e){1&d&&e.event&&console.log(e),2&d&&e.vdom&&console.log(e)})),window["_apprun-components"]=["components [print]",function(e){p("print"===e)}],window["_apprun-events"]=["events [print]",function(e){f("print"===e)}],window["_apprun-log"]=["log [event|view] on|off",function(e,t){"on"===e?d=3:"off"===e?d=0:"event"===e?"on"===t?d|=1:"off"===t&&(d&=-2):"view"===e&&("on"===t?d|=2:"off"===t&&(d&=-3)),console.log("* log "+e+" "+(t||""))}],window["_apprun-create-event-tests"]=["create-event-tests",function(){return i._createEventTests()}],window["_apprun-create-state-tests"]=["create-state-tests <start|stop>",function(e){return i._createStateTests(e)}],window._apprun=function(e){var t=o(e[0].split(" ").filter((function(e){return!!e}))),n=t[0],u=t.slice(1),c=window["_apprun-"+n];c?c[1].apply(c,r(u)):window["_apprun-help"][1]()},console.info('AppRun DevTools 0.4: type "_apprun `help`" to list all available commands.'),window.__REDUX_DEVTOOLS_EXTENSION__){var v=!1,m=window.__REDUX_DEVTOOLS_EXTENSION__.connect();m&&(console.info("Connected to the Redux DevTools"),m.subscribe((function(e){"START"===e.type?v=!0:"STOP"===e.type?v=!1:e.type})),c.default.on("debug",(function(e){if(v&&e.event){var t=e.newState,n={type:e.event,payload:e.e};t instanceof Promise?t.then((function(e){return m.send(n,e)})):m.send(n,t)}})))}},16:function(e,t,n){"use strict";function o(e){return Object.keys(e).map((function(t){return" "+("className"===t?"class":t)+'="'+(("object"==typeof(n=e[t])?Object.keys(n).map((function(e){return e+":"+n[e]})).join(";"):n.toString())+'"');var n})).join("")}function r(e){return e.map((function(e){return u(e)})).join("")}function u(e){if(!e)return"";if(function e(t){for(var n in t)null==t[n]?delete t[n]:"object"==typeof t[n]&&e(t[n])}(e),Array.isArray(e))return r(e);if("string"==typeof e)return e.startsWith("_html:")?e.substring(6):e;if(e.tag){var t=e.props?o(e.props):"",n=e.children?r(e.children):"";return"<"+e.tag+t+">"+n+"</"+e.tag+">"}return"object"==typeof e?JSON.stringify(e):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=u},17:function(e,t,n){"use strict";var o;function r(e){(o=window.open("",e)).document.write("<html>\n  <title>AppRun Analyzer | "+document.location.href+'</title>\n  <style>\n    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI" }\n  </style>\n  <body><pre>')}function u(e){o.document.write(e+"\n")}function c(){o.document.write("</pre>\n  </body>\n  </html>"),o.document.close()}Object.defineProperty(t,"__esModule",{value:!0}),t._createStateTests=t._createEventTests=void 0,app.debug=!0,t._createEventTests=function(){var e={components:{}};app.run("get-components",e);var t=e.components;r(""),Object.keys(t).forEach((function(e){t[e].forEach((function(e){u("const component = "+e.constructor.name+";"),u("describe('"+e.constructor.name+"', ()=>{"),e._actions.forEach((function(e){u("  it ('should handle event: "+e.name+"', ()=>{"),u("    component.run('"+e.name+"');"),u("    expect(component.state).toBeTruthy();"),u("  })")})),u("});")}))})),c()};var l=!1,i=[];app.on("debug",(function(e){l&&e.vdom&&(i.push(e),console.log("* "+i.length+" state(s) recorded."))})),t._createStateTests=function(e){"start"===e?(i=[],l=!0,console.log("* State logging started.")):"stop"===e?(0!==i.length?(r(""),i.forEach((function(e,t){u("  it ('view snapshot: #"+(t+1)+"', ()=>{"),u("    const component = "+e.component.constructor.name+";"),u("    const state = "+JSON.stringify(e.state,void 0,2)+";"),u("    const vdom = component['view'](state);"),u("    expect(JSON.stringify(vdom)).toMatchSnapshot();"),u("  })")})),c()):console.log("* No state recorded."),l=!1,i=[],console.log("* State logging stopped.")):console.log("create-state-tests <start|stop>")}},4:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n}})}));
//# sourceMappingURL=apprun-dev-tools.js.map